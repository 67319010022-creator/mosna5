<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giant Dutch Goldfish Smart Farm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="//cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.7/all/gauge.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body {
  font-family: 'Kanit', sans-serif;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  color: white;
  min-height: 100vh;
}

.dashboard-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 25px;
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 520px;
}

.chart-card {
  min-height: 420px;
}

.gauge-container {
  flex-grow: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

h1 {
  color: #f1c40f;
  text-shadow: 2px 2px 4px #000;
}

.btn-history {
  background: rgba(241, 196, 15, 0.2);
  color: #f1c40f;
  border: 1px solid #f1c40f;
  padding: 10px 25px;
  border-radius: 30px;
  text-decoration: none;
  transition: 0.3s;
  font-weight: 500;
}

.btn-history:hover {
  background: #f1c40f;
  color: #000;
  
}

/* Checkbox Style (Uiverse) */
.checkbox-wrapper input[type="checkbox"] {
  display: none;
}

.checkbox-wrapper label {
  --size: 70px;
  position: relative;
  display: block;
  width: var(--size);
  height: var(--size);
  margin: 0 auto;
  background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
  border-radius: 50%;
  cursor: pointer;
  transition: 0.2s;
}

.checkbox-wrapper label:before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 70%;
  height: 70%;
  background: #fff;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  transition: 0.2s;
}

.checkbox-wrapper input:checked+label:before {
  width: 0;
  height: 0;
}

.checkbox-wrapper .tick_mark {
  position: absolute;
  top: 15px;
  left: 22px;
  width: 35px;
  height: 35px;
  transform: rotate(-40deg);
}

.checkbox-wrapper .tick_mark:before,
.checkbox-wrapper .tick_mark:after {
  content: "";
  position: absolute;
  background: #fff;
  border-radius: 2px;
  opacity: 0;
  transition: 0.2s;
}

.checkbox-wrapper .tick_mark:before {
  left: 0;
  bottom: 0;
  width: 6px;
  height: 20px;
}

.checkbox-wrapper .tick_mark:after {
  left: 0;
  bottom: 0;
  width: 100%;
  height: 6px;
}

.checkbox-wrapper input:checked+label .tick_mark:before,
.checkbox-wrapper input:checked+label .tick_mark:after {
  opacity: 1;
}
    </style>
</head>

<body>
    
    <div class="container mt-3 text-end">
        <button onclick="logout()" class="btn btn-outline-danger btn-sm">
            <i class="fas fa-sign-out-alt"></i> ออกจากระบบ
        </button>
    </div>

    <div class="container py-5">
        <div class="text-center mb-5">
            <h1><i class="fas fa-fish"></i> ฟาร์มปลาทองฮอลันดายักษ์</h1>
            <div id="realtime-clock">กำลังโหลดเวลา...</div>
            <div class="mt-4">
                <a href="history.html" class="btn-history"><i class="fas fa-history"></i> ดูบันทึกสถิติย้อนหลัง</a>
            </div>
        </div>

        <div class="row g-4 justify-content-center">
            <div class="col-md-4">
                <div class="dashboard-card text-center">
                    <h3><i class="fas fa-temperature-high text-warning"></i> อุณหภูมิ</h3>
                    <div class="gauge-container"><canvas id="tempGauge"></canvas></div>
                    <div class="mt-2 fs-3 fw-bold text-warning" id="tempText">-- °C</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="dashboard-card text-center">
                    <h3><i class="fas fa-tint text-info"></i> ความชื้น</h3>
                    <div class="gauge-container">
                        <div id="humidGaugeECharts" style="width: 100%; height: 280px;"></div>
                    </div>
                    <div class="mt-2 fs-3 fw-bold text-info" id="humidText">-- %</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="dashboard-card text-center">
                    <h3><i class="fas fa-power-off"></i> ควบคุมปั๊มน้ำ</h3>
                    <p>สถานะอุปกรณ์</p>
                    <div class="gauge-container d-flex flex-column justify-content-center">
                        
                        <div class="checkbox-wrapper">
                            <input id="led-switch" type="checkbox">
                            <label for="led-switch">
                                <div class="tick_mark"></div>
                            </label>
                        </div>
                    </div>
                    <div id="statusText" class="mt-4 fw-bold fs-5">OFF</div>
                </div>
            </div>
        </div>

        <div class="stat-card mt-4">

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label text-warning">ตั้งค่าอุณหภูมิ (°C)</label>
                    <input type="number" id="inputTemp" class="form-control bg-dark text-white border-secondary"
                        placeholder="เช่น 30.5">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label text-info">ตั้งค่าความชื้น (%)</label>
                    <input type="number" id="inputHumid" class="form-control bg-dark text-white border-secondary"
                        placeholder="เช่น 60">
                </div>
            </div>
            <button onclick="updateCondition()" class="btn btn-outline-warning w-100">
                <i class="fas fa-save"></i> บันทึกค่าเงื่อนไข
            </button>
        </div>

        <div class="row g-4 mt-2">
            <div class="col-md-6">
                <div class="dashboard-card chart-card">
                    <h4 class="text-center">สถิติอุณหภูมิ </h4>
                    <div id="tempChart"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="dashboard-card chart-card">
                    <h4 class="text-center">สถิติความชื้น </h4>
                    <div id="humidChart" style="width: 100%; height: 300px;"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>